

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Software Stack &mdash; DeveloperTools 1.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Project Management" href="../project_management/index.html" />
    <link rel="prev" title="Design Documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> DeveloperTools
          

          
          </a>

          
            
            
              <div class="version">
                1.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../conventions/index.html">Project Conventions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Design Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Software Stack</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#software-stack-overview">Software Stack Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#framework-layer">Framework Layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#framework-repository-quick-reference">Framework Repository Quick-Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#module-layer">Module Layer</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#module-repository-quick-reference">Module Repository Quick-Reference</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#user-api-layer">User API Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#miscellaneous-repositories">Miscellaneous Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="#faqs">FAQs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#why-so-many-repos">Why So Many Repos?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#so-where-s-nwchemex">So Where’s “NWChemEx”?</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../project_management/index.html">Project Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../resources/index.html">Additional Developer Resources</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DeveloperTools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Design Documentation</a> &raquo;</li>
        
      <li>Software Stack</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/design/software_stack.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="software-stack">
<h1>Software Stack<a class="headerlink" href="#software-stack" title="Permalink to this headline">¶</a></h1>
<p>The point of this page is to explain the philosophy and organization of
NWChemEx’s software stack.</p>
<div class="section" id="software-stack-overview">
<h2>Software Stack Overview<a class="headerlink" href="#software-stack-overview" title="Permalink to this headline">¶</a></h2>
<p>NWChemEx is made up of three major software components. In order from least user
facing to most user facing they are: the framework, the modules, and the user
API. This is summarized in the following figure:</p>
<div class="figure align-right" id="id1" style="width: 50%">
<img alt="../_images/depends_overview.png" src="../_images/depends_overview.png" />
<p class="caption"><span class="caption-text">UML diagram of the four major components of the NWChemEx software stack.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>The framework component encapsulates the infrastructure required to interact
with the hardware and to run the modules. The framework is intended to have APIs
that are long-term stable. Most developers will only interact with the framework
through its API and will not need to perform development on it. In addition to
the literal infrastructure needed to drive the program, the framework layer also
includes the classes used to abstract basic chemistry concepts. This is where
you will find the definition and implementation of concepts such as tensors,
molecules, and atomic orbital basis sets.</p>
<p>The module layer is where most of the infrastructure commonly associated with an
electronic structure package resides. This is where you will find code for
running an SCF, optimizing a geometry, or evaluating electronic integrals. Each
module is a self-contained code that performs a single task. Packages outside
the NWChemEx ecosystem that are interested in leveraging our functionality do
so through modules. It is essential that modules remain decoupled from as much
as possible to facilitate their uptake by other packages. This is accomplished
by only depending on the framework layer and not other modules.</p>
<p>The framework layer is quite general and quite flexible. This generality and
flexibility comes at the cost of complexity. While design efforts have striven
to make the framework layer as simple as possible, the reality is that it is
still quite verbose from a typical user’s perspective. Consequentially, the
user API layer wraps the set-up of the framework (including setting up modules)
in a more user-friendly API. This API is built on top of the full framework API
and is designed to make simple tasks easy. More complicated workflows can always
directly access the framework for finer-grained control.</p>
<p>The following sections provide more detailed overviews of each software
component.</p>
</div>
<div class="section" id="framework-layer">
<h2>Framework Layer<a class="headerlink" href="#framework-layer" title="Permalink to this headline">¶</a></h2>
<div class="figure align-left" id="id2" style="width: 50%">
<img alt="../_images/base_depends.png" src="../_images/base_depends.png" />
<p class="caption"><span class="caption-text">Components comprising the framework layer of NWChemEx.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The framework layer contains software components used to assemble the software
infrastructure of NWChemEx. At the base of this layer is
<a class="reference external" href="https://github.com/CMakePP">CMakePP</a>. CMakePP is a CMake module designed to
facilitate building C and C++ projects. Nearly all of NWChemEx’s components use
CMakePP as their build system. Historically the complexity of a C/C++ project’s
build system has been a driving motivation for avoiding a modular software stack
like NWChemEx’s. It is thanks to CMakePP that we are able to maintain our
modular stack.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Utilities</span></code> repo serves as NWChemEx’s Boost. It contains a variety of
non-chemistry classes that augment C++’s standard library. Developers who write
generic classes that they perceive as being useful for a wide range of
applications are encouraged to submit them to the <code class="docutils literal notranslate"><span class="pre">Utilities</span></code> repo.</p>
<p><code class="docutils literal notranslate"><span class="pre">LibChemist</span></code> and <code class="docutils literal notranslate"><span class="pre">TAMM</span></code> define the classes used for data passing.
Respectively these repos focus on chemistry-related and tensor-related classes.
All common APIs are written in terms of classes that are defined in these repos
or are part of the standard C++ library.</p>
<p><code class="docutils literal notranslate"><span class="pre">SDE</span></code> is the framework proper. It is responsible for stitching the modules
together to form the program’s call graph. It also is charged with logging the
computation and managing computer resources. It works in conjunction with
<code class="docutils literal notranslate"><span class="pre">PropertyTypes</span></code>. <code class="docutils literal notranslate"><span class="pre">PropertyTypes</span></code> defines the APIs that modules must satisfy.
A property type is akin to an abstract base class for a module. To use your
module, other modules do not need to know the inner details of your module, but
rather which property types it satisfies. This allows us to defer coupling to
runtime and have an incredibly flexible program. Modules are key concept in the
NWChemEx program explained in more detail in the next section.</p>
<div class="section" id="framework-repository-quick-reference">
<h3>Framework Repository Quick-Reference<a class="headerlink" href="#framework-repository-quick-reference" title="Permalink to this headline">¶</a></h3>
<p>The following table provides a quick reference to what each of the framework
repositories contain.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Repository</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Utilities</p></td>
<td><p>Helpful, generic C++ classes akin to Boost/STL</p></td>
</tr>
<tr class="row-odd"><td><p>TaskForce</p></td>
<td><p>The runtime abstraction layer</p></td>
</tr>
<tr class="row-even"><td><p>SDE</p></td>
<td><p>The runtime framework</p></td>
</tr>
<tr class="row-odd"><td><p>TAMM</p></td>
<td><p>A C++ tensor library designed for quantum chemistry</p></td>
</tr>
<tr class="row-even"><td><p>LibChemist</p></td>
<td><p>Chemistry specific classes</p></td>
</tr>
<tr class="row-odd"><td><p>PropertyTypes</p></td>
<td><p>Definitions of the module APIs</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="module-layer">
<h2>Module Layer<a class="headerlink" href="#module-layer" title="Permalink to this headline">¶</a></h2>
<div class="figure align-right" id="id3" style="width: 50%">
<img alt="../_images/module_depends.png" src="../_images/module_depends.png" />
<p class="caption"><span class="caption-text">Module layer of NWChemEx</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>You can think of the framework as being similar to your phone’s operating system
and modules as being similar to apps. The module layer is then analogous to the
app store on your phone. Namely it is comprised of all the possible modules that
can be used with the framework layer. Each module satisfies one or more property
types. Roughly speaking saying a module satisfies property type <code class="docutils literal notranslate"><span class="pre">X</span></code> is
analogous to saying an app is an email client versus a game. That app can then
be used whenever you need to send/receive an email. Analogously, a module that
satisfies say property type <code class="docutils literal notranslate"><span class="pre">Energy</span></code> can be used anytime you need to compute
an energy.  Obviously there are many ways to compute the energy of a molecular
system. Each module is responsible for implementing one of them and the
framework is responsible for choosing the implementation the user wants.</p>
<p>While each module is capable of being used independently it tends to be the
case that modules are developed in close connection with other modules. For
example, the module for computing the energy of a molecular system using the
SCF level of theory, is developed in close connection with the module for
building the Coulomb matrix. For this reason NWChemEx groups the modules into
repos. As shown in the accompanying UML diagram, note that there are no
cross-dependencies, rather each repo depends only on the framework layer (in
truth some of the repos also have external dependencies that are not shown
here, but the point remains that there is no additional coupling to NWChemEx).</p>
<div class="section" id="module-repository-quick-reference">
<h3>Module Repository Quick-Reference<a class="headerlink" href="#module-repository-quick-reference" title="Permalink to this headline">¶</a></h3>
<p>The following table provides a quick-reference for what sorts of modules
are in each repo.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 22%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Repository</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>LibMathematician</p></td>
<td><p>Encapsulate linear algebra routines like diagonalization</p></td>
</tr>
<tr class="row-odd"><td><p>Integrals</p></td>
<td><p>Modules implementing AO-based integrals</p></td>
</tr>
<tr class="row-even"><td><p>SCF</p></td>
<td><p>Modules implementing self-consistent field theory</p></td>
</tr>
<tr class="row-odd"><td><p>MP2</p></td>
<td><p>Modules implementing MP2 (and variations of it)</p></td>
</tr>
<tr class="row-even"><td><p>CoupledCluster</p></td>
<td><p>Modules implementing coupled cluster theory</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="user-api-layer">
<h2>User API Layer<a class="headerlink" href="#user-api-layer" title="Permalink to this headline">¶</a></h2>
<p>Ultimately when a user starts up NWChemEx it spins up the framework and loads it
with modules. The responsibility for selecting NWChemEx’s default modules and
default options falls to the user API layer. The user API is contained within
the <code class="docutils literal notranslate"><span class="pre">NWChemEx</span></code> repo. This repo is capable of automatically building all of
the dependencies contained in the framework and module layers. The <code class="docutils literal notranslate"><span class="pre">NWChemEx</span></code>
repo also contains miscellaneous Python functions to provide a cleaner, more
user-friendly API to NWChemEx. These functions are built on top of the
framework’s API and can be intermixed with raw calls to the framework. Hence it
is possible to fully control NWChemEx in conjunction with the user API.</p>
</div>
<div class="section" id="miscellaneous-repositories">
<h2>Miscellaneous Repositories<a class="headerlink" href="#miscellaneous-repositories" title="Permalink to this headline">¶</a></h2>
<p>The NWChemEx-Project organization contains a number of additional “meta”
repositories that are not directly required for building NWChemEx. They are
summarized in the following table.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Repository</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DeveloperTools</p></td>
<td><p>Developer documentation and tools for maintaining NWChemEx</p></td>
</tr>
<tr class="row-odd"><td><p>Publications</p></td>
<td><p>Manuscripts written by the NWChemEx team about NWChemEx</p></td>
</tr>
<tr class="row-even"><td><p>dox</p></td>
<td><p>Deprecated documentation repo</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="faqs">
<h2>FAQs<a class="headerlink" href="#faqs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="why-so-many-repos">
<h3>Why So Many Repos?<a class="headerlink" href="#why-so-many-repos" title="Permalink to this headline">¶</a></h3>
<p>When transitioning from developing a more traditional electronic structure
package to NWChemEx, one of the first observations developers make is that there
are a lot of repos. The motivation behind this is to decouple the source code
into individual components. Each of these components is capable of being used on
its own without the rest of NWChemEx. It is our hope that such a code
factorization will facilitate adoption of these components by other codes,
thereby motivating code reuse.</p>
<p>While lots of electronic structure packages are comprised of libraries, and
therefore tout that they are modular, it has been our experience that few
actually are modular. The main reason they are not modular is that the libraries
are tightly coupled. Specifically it is in general not possible to use one of
the libraries without pulling in the entirety of the package. NWChemEx’s
strategy of keeping each library in an individual repo forces each library to be
stand alone. It also makes it easier for other codes to get the library they
want without having to extract it from a monolithic code base.</p>
</div>
<div class="section" id="so-where-s-nwchemex">
<h3>So Where’s “NWChemEx”?<a class="headerlink" href="#so-where-s-nwchemex" title="Permalink to this headline">¶</a></h3>
<p>Having a bunch of individual repos is great for developers, but confusing to
users. Users only need to build the <code class="docutils literal notranslate"><span class="pre">NWChemEx</span></code> repo. Building this repo will
build all dependencies which are required to have the complete NWChemEx
electronic structure package.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../project_management/index.html" class="btn btn-neutral float-right" title="Project Management" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Design Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, NWChemEx Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>